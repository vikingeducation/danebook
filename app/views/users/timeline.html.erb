<%= render 'nav' %>

<%= render 'header' %>



           <!--      POSTS         -->

           <div id="posts-container" class="container">


             <div id="posts-row" class="row">
                 <div class="col-xs-4">
                   <div class="row">
                     <div class="box-header col-xs-11">
                       <h5><strong>About (Text Area)</strong></h5>
                     </div>
                   </div>
                   <div class="row">
                     <div class="box-content col-xs-11">
                     <p><strong>Born on: </strong><%="#{@user.b_month}/#{@user.b_day}/#{@user.b_year}"%></p>
                     <p><strong>Went to school at: </strong><%= @user.college %></p>
                     <p><strong>Hometown:</strong> <%= @user.home %>d</p>
                     <p><strong>Currently Lives:</strong> <%= @user.lives %></p>
                     </div>
                   </div>
                   <div class="row">
                     <div class="box-header col-xs-11">
                       <h5><strong>Photos (123) (Copied Text Area)</strong></h5>
                     </div>

                   </div>
                   <div class="row">
                     <div class="box-content col-xs-11">
                       <div class="row">
                         <% @photos.each do |photo| %>
                         <div class="col-xs-4">
                           <a href="<%=user_photo_path(@user,photo)%>"><img class="img-responsive" src="<%=photo.data.url(:thumb)%>"></a>
                         </div>
                         <%end%>

                     </div>
                     <div class="center-link row">
                       <%=link_to "See More Photos", user_photos_path(@user) %>
                     </div>
                   </div>
                 </div>
                   <div class="row">
                     <div class="box-header col-xs-11">
                       <h5><strong>Friends (<%=@user.friends.count%>)</strong></h5>
                     </div>
                   </div>
                   <div class="row">
                     <div class="box-content col-xs-11">
                       <div class="row">
                         <% @friends.each do |friend| %>
                         <div class="center-link col-xs-4">
                           <a href="<%=user_path(friend)%>"><img class="img-responsive" src="<%=current_cover(friend)%>"></a>
                           <%=link_to friend.full_name, user_path(friend)%>

                         </div>
                         <%end%>


                       </div>
                       <div class="center-link row">
                         <%= link_to "See More Friends", friends_path(user_id: @user.id) %>
                       </div>
                     </div>
                   </div>
                 </div>

                 <div class="col-xs-8">
                   <% if correct_user? %>
                   <div class="row">
                     <div class="box-header col-xs-11 col-xs-offset-1">
                       <h5><strong>Post</strong></h5>
                     </div>
                   </div>

                   <%= form_for @user do |u| %>

                   <%= u.fields_for :posts, Post.new do |p| %>
                   <div class="row">

                     <div class="box-content col-xs-11 col-xs-offset-1">
                        <%= p.text_area :body, rows: 3, placeholder: "Tell the world something...", id: "comment-area", class: "form_control" %>


                     </div>

                   </div>
                   <%end%>
                   <div class="row">
                     <div class="box-foot col-xs-11 col-xs-offset-1">

                       <%= u.submit "Post", class: "btn-primary", id: "post-btn"%>

                     </div>
                   </div>
                   <%end%>
                   <%else%>
                   <br>
                   <%end%>

                   <!--      beginning of my post thing -->

                   <% @user.posts.reverse.each do |post| %>
                   <div class="row">
                     <div class="post-img box-content col-xs-11 col-xs-offset-1">
                       <div class="user-img"><a href="<%= user_path(@user) %>"><img width="50px" src="<%=image_path('user.jpg')%>"></a></div>
                       <h5><u><%= link_to "#{@user.first_name} #{@user.last_name}", user_path(@user) %></u><br><small>Posted on <%= post.created_at.strftime("%d %b. %Y")%></small></h5>
                       <div class="col-xs-12">
                         <p><br><%= post.body %></p>
                       </div>
                     </div>
                   </div>
                   <div class="row">
                     <div class="box-foot col-xs-11 col-xs-offset-1">
                       <% unless post.likers.include?(current_user) %>
                          <u><%=link_to "Like", likes_path(:likable_id => post.id, :likable_type => post.class), :method => :post%></u>
                       <%else%>
                          <u><%=link_to "Unlike", like_path(post.likes.where("liker_id = ?", current_user.id).first), :method => :delete%></u>
                       <%end%>

                       <div class="delete-link"><u><%=link_to "Delete", post_path(post), data: {:confirm => "Are you sure?"}, :method => :delete%></u></div>
                       <p><br><%= post.likes.count %> people have liked this post.</p>
                       <hr>
                       <% post.comments.each do |c| %>
                        <div class="row">
                           <div class="col-xs-2">
                             <div class="com-img"><a href="<%= user_path(c.commenter) %>"><img width="50px" src="<%=current_cover(c.commenter)%>"></a></div>
                           </div>
                           <div class="col-xs-10">
                             <h5><u><%=link_to c.commenter.full_name, user_path(c.commenter) %></u><small> Said on <%= c.created_at.strftime("%d %b. %Y")%></small></h5>
                             <p><%=c.body%></p>
                             <% unless c.likers.include?(current_user) %>
                                <u><%=link_to "Like", likes_path(:likable_id => c.id, :likable_type => c.class), :method => :post%></u>
                             <%else%>
                                <u><%=link_to "Unlike", like_path(c.likes.where("liker_id = ?", current_user.id).first), :method => :delete%></u>
                             <%end%>
                             <div class="delete-link"><u><%=link_to "Delete", comment_path(c), data: {:confirm => "Are you sure?"}, :method => :delete%></u></div>
                             <small><%= c.likes.count %> people like this</small>
                           </div>
                        </div>

                        <%end%>
                     <%= form_for post do |p| %>
                      <%= p.fields_for :comments, Comment.new do |c| %>
                         <%= c.text_area :body, rows: 3, placeholder: "Tell the world something...", id: "comment-area", class: "form_control" %>
                         <%= c.hidden_field :commentable_type, value: post.class %>
                         <%= c.hidden_field :commentable_id, value: post.id %>
                         <%= c.hidden_field :commenter_id, value: current_user.id %>
                         <a href="#"><u>Cancel</u></a>
                      <%end%>
                     <%= p.submit "Comment", class: "btn-primary", id: "post-btn"%>
                     <%end%>


                     </div>
                   </div>
                   <%end%>
                   <!--     end of my post thing    -->

                 </div>
             </div>
           </div>
