<% this_like = photo.likes.where(liker_id: current_user.id).first %>

<% unless this_like %>
  <%= link_to "Like", "/photos/#{photo.id}/likes", method: :post %>
<% else %>
  <%= link_to "Unlike", "/photos/#{photo.id}/likes/#{this_like.id}", method: "delete" %>
<% end %>