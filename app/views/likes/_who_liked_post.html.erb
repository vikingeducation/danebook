<% this_like = post.likes.where(liker_id: current_user.id).first %>
<% other_likes = post.likes.where.not(liker_id: current_user.id)[0..2] %>
<% first_few = 1 %>

<%= "You " if this_like %>
<%= "and " if this_like && other_likes.any? %>

<% other_likes.take(3).each_with_index do |other_like, i| %>
  <%= "#{other_like.liker.full_name} " %>
  <% first_few += 1 %>
<% end %>

<% total_others_who_like_this = post.likes.where.not(liker_id: current_user.id).count %>
<% total_others_who_like_this -= first_few %>

<% if total_others_who_like_this > 0 %>
  <%= "and #{total_others_who_like_this} " %>
  <% if total_others_who_like_this > 1 %>
    <%= "others " %>
  <% else %>
    <%= "other " %>
  <% end %>
<% end %>
<%= "like this" if post.likes.any? && ( post.likes.count > 1 || this_like ) %>
<%= "likes this" if post.likes.count == 1 && !(this_like) %>